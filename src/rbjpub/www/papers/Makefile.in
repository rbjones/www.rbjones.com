# $Id: Makefile.in,v 1.10 2006/10/22 13:38:40 rbj01 Exp $

include @top_srcdir@/top_srcdir.mk

RELSRCDIR=src/rbjpub/www/papers
RELWEBDIR=rbjpub/www/papers

PPDB=
PPDBDIR=
PPXML=
PPDOC=$(PPXML:.xml=.doc)
# Plain ProofPower documents (not from XML)
PPPDOC=
KLUTEX1=p001.tex p002.tex p003.tex p004.tex p005.tex p006.tex p007.tex p008.tex p009.tex p010.tex
KLUTEX=p000.tex $(KLUTEX1)
PPLDS=$(PPXML:.xml=.lds)
PPTH=
PPTHD=$(PPTH:.th=.thd)

XML007=$(PPXML)
XML008=index.xml

ENTFILES=pp-symbol.ent
KLUFILES=rbjk.cls

SRCDIRCPY=$(PPPDOC) $(KLUTEX)
XLDPDIRCPY=$(ENTFILES)
COMDIRCPY=$(KLUFILES)

include $(TOPSRCDIR)/build/common/vars.mk

WEBFILES=$(HTML005) $(HTML007) $(HTML008) $(PDF)

include $(TOPSRCDIR)/src/common/rules.mk

# Paths

vpath %.bib $(COMDIR)
vpath %.in $(SRCDIR)
vpath %.xml $(SRCDIR)
vpath %.xsl $(XLCOMDIR)

# Rules

$(PPTH): $(PPDB).dbts 
	touch $@

p000.pdf: p000abs.tex

p000abs.tex: $(KLUTEX1)
	texindex2tex $(KLUTEX1) > p000abs.tex

indexmiddle.xml: $(KLUTEX)
	texindex2xml 0 $(KLUTEX) > indexmiddle.xml

index.xml: indexhead.xml indexmiddle.xml indextail.xml
	cat $^ > index.xml