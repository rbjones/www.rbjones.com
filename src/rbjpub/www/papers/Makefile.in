# $Id: Makefile.in,v 1.19 2010/11/09 13:32:39 rbj Exp $

include @top_srcdir@/top_srcdir.mk

RELSRCDIR=src/rbjpub/www/papers
RELWEBDIR=rbjpub/www/papers

PPDB=
PPDBDIR=
PPXML=
PPDOC=$(PPXML:.xml=.doc)
# Plain ProofPower documents (not from XML)Menu
PPPDOC=
KLUTEX1=p015.tex p014.tex p013.tex p012.tex p011.tex p010.tex \
	p009.tex p008.tex p007.tex p006.tex p005.tex p004.tex p003.tex p002.tex p001.tex
KLUTEX2=p013a.tex p013b.tex p013c.tex p015a.tex
KLUTEX=p000.tex $(KLUTEX1)
TEXPDF=$(KLUTEX:.tex=.pdf)
PPLDS=$(PPXML:.xml=.lds)
PPTH=
PPTHD=$(PPTH:.th=.thd)

XML007=$(PPXML)
XML008=index.xml

ENTFILES=pp-symbol.ent
COMFILES=rbjk.cls

PNGFILES=p008a.png p008b.png

SRCDIRCPY=$(PPPDOC) $(KLUTEX) $(PNGFILES) $(KLUTEX2)
XLDPDIRCPY=$(ENTFILES)
COMDIRCPY=$(COMFILES)

include $(TOPSRCDIR)/build/common/vars.mk

WEBFILES=$(HTML007) $(HTML008) $(PDF)

include $(TOPSRCDIR)/src/common/rules.mk

# Paths

vpath %.bib $(COMDIR)
vpath %.in $(SRCDIR)
vpath %.xml $(SRCDIR)
vpath %.xsl $(XLCOMDIR)

# Dependencies

p000.pdf: p000abs.tex

p008.pdf: rbj.bib p008a.png p008b.png

p013.pdf: p013a.tex p013b.tex p013c.tex

p015.pdf: p015a.tex

# Rules

p000abs.tex: $(KLUTEX1)
	texindex2tex $(KLUTEX1) > p000abs.tex

indexmiddle.xml: $(KLUTEX)
	texindex2xml 0 "" $(KLUTEX) > indexmiddle.xml

index.xml: indexhead.xml indexmiddle.xml indextail.xml
	cat $^ > index.xml
