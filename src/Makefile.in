# $Id: Makefile.in,v 1.5 2011/11/30 19:16:25 rbj Exp $

include @top_srcdir@/top_srcdir.mk

XML008=

XMLFILES=$(XML007) $(XML008) $(XML008S) 
ENTFILES=pp-symbol.ent

SRCCPYWEB=robots.txt rbj.asc index.htm index.html
SRCDIRCPY=$(SRCCPYWEB) $(INDEXSCRIPTS)
XLDPDIRCPY=$(ENTFILES)
RELSRCDIR=src
RELWEBDIR=
SUBDIRS=common rbjpub jls texts

include $(TOPSRCDIR)/build/common/vars.mk

WEBFILES=$(HTML005) $(HTML007) $(HTM008S) $(HTML008) $(SRCCPYWEB)

INDEXSCRIPTS=mkallidx.sh stats.pm sostat2.pl mkprch.pl mkplist.pl mklindex.pl \
	mkglist.pl mkindex.pl mkdindex.pl mkchlist.pl 

include $(TOPSRCDIR)/src/common/rules.mk

# Paths

vpath %.in $(SRCDIR)
vpath %.xml $(SRCDIR)
vpath %.xsl $(XLCOMDIR)
#vpath %.ent $(XLDPDIR)

# Dependencies
#index.html: rbjpub/index.xmlt

# Targets

installindexes: $(INDEXSCRIPTS)
	@echo "Processing stats and generating indexes"
	perl -w sostat2.pl $(WEBDIR) $(STATSDIR) 77 rbjones.com-May-2015
	perl -w mkplist.pl $(WEBDIR) "" fall
	perl -w mkplist.pl $(WEBDIR) philosophy fphil
	perl -w mkplist.pl $(WEBDIR) logic flogic
	perl -w mkglist.pl $(WEBDIR) "" fall
	perl -w mkchlist.pl $(WEBDIR) $(STATSDIR) 77 2015-01-01 4
	perl -w mkprch.pl $(WEBDIR) $(STATSDIR) 77 2015-01-01 current
	perl -w mkindex.pl $(WEBDIR) $(STATSDIR) rbjpub 77
	perl -w mkdindex.pl $(WEBDIR) $(STATSDIR) rbjpub 3 77
	perl -w mklindex.pl $(WEBDIR) rbjpub